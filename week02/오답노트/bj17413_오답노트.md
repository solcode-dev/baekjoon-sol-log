# 백준 17413번: 단어 뒤집기 2 - 오답노트

## 문제 정보
- **문제 번호**: 백준 17413번
- **문제명**: 단어 뒤집기 2
- **난이도**: Silver 3
- **사용 자료구조**: Stack, String

## 문제 요약
문자열에서 태그(`<>`)는 그대로 두고, 태그 밖의 단어들만 뒤집어 출력하는 문제

### 입출력 예시
```
입력: <ab cd>ef gh<ij kl>
출력: <ab cd>fe hg<ij kl>
```

## 풀이 과정 및 발견한 오류

### 1차 시도: 빈 출력 문제
**증상**: `ans`에 아무 값도 들어가지 않음

**원인**: 
```cpp
if (ch == '<') {
  if (!s.empty()) {  // ❌ 한 글자만 pop
    ans += s.top();
    s.pop();
  }
  tag = true;
}
```
- 스택에 여러 글자가 있어도 **한 글자만** pop하는 로직
- `if` 대신 `while`을 사용해야 스택의 모든 글자를 처리

**해결**: `while (!s.empty())`로 변경

### 2차 시도: 공백 처리 누락
**증상**: 
```
입력: <ab cd>ef gh<ij kl>
출력: <ab cd>fehg <ij kl>  // ❌ 공백이 사라짐
```

**원인**:
```cpp
} else {  // 태그 밖
  s.push(ch);  // ❌ 공백도 스택에 push
}
```
- 공백을 만났을 때 단어를 구분하지 않고 계속 스택에 추가
- 공백은 단어의 구분자로 처리해야 함

**해결**: 
```cpp
} else {
  if (ch == ' ') {
    while (!s.empty()) {  // 스택 비우기
      ans += s.top();
      s.pop();
    }
    ans += ch;  // 공백 추가
  } else {
    s.push(ch);
  }
}
```

### 3차 시도: 마지막 단어 누락
**증상**: 문자열 끝에 태그가 없으면 마지막 단어가 출력되지 않음

**원인**: 반복문이 끝난 후 스택에 남은 문자 처리 로직 없음

**해결**: 
```cpp
// 반복문 종료 후 스택에 남은 문자 처리
while (!s.empty()) {
  ans += s.top();
  s.pop();
}
```

## 최종 풀이 코드
```cpp
#include <iostream>
#include <stack>
#include <string>
using namespace std;

int main() {
  string line;
  getline(cin, line);

  bool tag = false;
  string ans;
  stack<char> s;

  for (char ch : line) {
    if (ch == '<') {
      while (!s.empty()) {  // ✅ 모든 문자 pop
        ans += s.top();
        s.pop();
      }
      tag = true;
    }

    if (tag) {
      ans += ch;
    } else {
      if (ch == ' ') {  // ✅ 공백 처리
        while (!s.empty()) {
          ans += s.top();
          s.pop();
        }
        ans += ch;
      } else {
        s.push(ch);
      }
    }

    if (ch == '>') {
      tag = false;
    }
  }

  while (!s.empty()) {  // ✅ 마지막 단어 처리
    ans += s.top();
    s.pop();
  }
  cout << ans;
}
```

## 핵심 체크포인트

### ✅ 반드시 처리해야 할 3가지
1. **`<` 만났을 때**: 스택에 있는 **모든** 문자를 pop하여 출력 (`while`)
2. **공백 만났을 때**: 스택 비우고 공백 추가 (단어 구분)
3. **반복문 종료 후**: 스택에 남은 문자 처리 (마지막 단어)

### 🔑 핵심 알고리즘
- **스택**: 문자를 역순으로 출력하기 위해 사용
- **불린 플래그**: 현재 태그 안인지 밖인지 상태 관리
- **공백 구분**: 태그 밖에서 공백을 만나면 현재까지의 단어를 뒤집어 출력

## 배운 점
- 스택을 비울 때는 항상 `while (!s.empty())`를 사용해야 함
- 문자열 파싱 문제에서는 **구분자**(공백, 특수문자) 처리를 명시적으로 해야 함
- 반복문 종료 후 **남은 데이터 처리**를 잊지 말 것
